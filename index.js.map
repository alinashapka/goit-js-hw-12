{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function fetchImages(searchQuery, currentPage = 1) {\n    const API_KEY = \"49456082-a9826f5e30a55e93368b2873a\";\n    const BASE_URL = \"https://pixabay.com/api/\";\n    const PER_PAGE = 15;\n    const params = {\n        key: API_KEY,\n        q: searchQuery,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        per_page: PER_PAGE,\n        page: currentPage,\n    };\n\n    try {\nconst response = await axios.get(`${BASE_URL}`, {\n        params\n})\n        return { images: response.data.hits, totalHits: response.data.totalHits };\n    }\n    catch (error) {\n        console.error('Error fetching images', error);\n        throw error;\n    };\n}\n\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nlet lightbox;\n\nexport function showImages(images, gallery, showGallery = false) {\n  if (!showGallery) {\n    gallery.innerHTML = '';\n  }\n  \n    if (images.length === 0) {\n        iziToast.error({\n            position: 'topRight',\n            backgroundColor: ' #ef4040',\n            messageColor: '#ffffff',\n            message:\n                'Sorry, there are no images matching your search query. Please try again!',\n        });\n        return;\n    }\n\n    const imageCard = images.map(image => {\n        return `<li class=\"gallery-item\">\n        <a href=\"${image.largeImageURL}\" class=\"gallery-link\">\n            <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n          </a>\n          <div class=\"image-info\">\n            <p><span class=\"label\">Likes:</span>${image.likes}</p>\n            <p><span class=\"label\">Views:</span>${image.views}</p>\n            <p><span class=\"label\">Comments:</span>${image.comments}</p>\n            <p><span class=\"label\">Downloads:</span>${image.downloads}</p>\n          </div>\n        </li>\n    `;\n    }).join(\"\");\n\n\n  gallery.insertAdjacentHTML(\"beforeend\", imageCard);\n\n\n    if (!lightbox) {\n    lightbox = new SimpleLightbox('.gallery-link', {\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n  } else {\n    lightbox.refresh();\n    }\n}","import iziToast from \"izitoast\";\nimport {fetchImages} from \"./js/pixabay-api.js\";\nimport {showImages} from \"./js/render-functions.js\";\n\nconst form = document.querySelector('.form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMore = document.querySelector('.load-btn');\n\nlet currentPage = 1;\nlet totalPages = 0;\nlet searchQuery = \"\";\nconst PER_PAGE = 15;\n\nloader.style.visibility = 'hidden';\nloadMore.classList.add(\"visually-hidden\");\n\nform.addEventListener(\"submit\", onSearchSubmit)\nloadMore.addEventListener(\"click\", onLoadMoreClick);\n\nfunction scrollDown() {\n  const elem = document.querySelector('.gallery-item');\n  if (elem) {\n    const { height } = elem.getBoundingClientRect();\n    window.scrollBy({\n      top: height * 2,\n      behavior: 'smooth',\n    });\n  }\n}\n\nasync function onSearchSubmit(event) {\n    event.preventDefault();\ncurrentPage = 1;\n    totalPages = 0;\n    \n    searchQuery = event.target.elements[\"search-text\"].value.trim();\n    \n    if (!searchQuery) {\n        iziToast.error({\n            title: \"Error!\",\n            position: 'topRight',\n            backgroundColor: ' #ef4040',\n            messageColor: '#ffffff',\n      message: 'Please, enter a search query!',\n        })\n        return;\n    }\n\n    loader.style.visibility = 'visible';\n\n    try {\n        const { images, totalHits } = await fetchImages(searchQuery, currentPage);\n                showImages(images, gallery);\n        loader.style.visibility = 'hidden';\n\n        totalPages = Math.ceil(totalHits / PER_PAGE);\n        \n\n    if (totalPages > currentPage) {\n      loadMore.classList.remove(\"visually-hidden\");\n        }\n    else {\n         loadMore.classList.add(\"visually-hidden\");\n        }\n        scrollDown();\n    } catch (error) {\n        iziToast.error({\n            title: \"Error!\",\n            position: 'topRight',\n            backgroundColor: ' #ef4040',\n            messageColor: '#ffffff',\n            message: 'Error fetching images',\n        });\n        loader.style.visibility = 'hidden';\n    }\n    finally {\n        form.reset();\n    }\n};\n\nasync function onLoadMoreClick() {\n    currentPage += 1;\n\n    try {\n       const {images} = await fetchImages(searchQuery, currentPage);\n        showImages(images, gallery, true);\n        loader.style.visibility = 'hidden';\n\n        if (currentPage >= totalPages) {\n            loadMore.classList.add(\"visually-hidden\");\n            iziToast.info({\n                position: 'topRight',\n                message: \"We're sorry, but you've reached the end of search results.\",\n            });\n        }\n        scrollDown();\n    } catch (error) {\n        iziToast.error({\n            title: \"Error!\",\n            position: 'topRight',\n            backgroundColor: ' #ef4040',\n            messageColor: '#ffffff',\n            message: 'Error fetching images',\n        });\n        loader.style.visibility = 'hidden';\n    }\n}"],"names":["fetchImages","searchQuery","currentPage","API_KEY","BASE_URL","params","response","axios","error","lightbox","showImages","images","gallery","showGallery","iziToast","imageCard","image","SimpleLightbox","form","loader","loadMore","totalPages","PER_PAGE","onSearchSubmit","onLoadMoreClick","scrollDown","elem","height","event","totalHits"],"mappings":"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"}